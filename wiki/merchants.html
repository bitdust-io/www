<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title data-content="pageTitle">BitDust - Decentralized on-line storage network</title>
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">

    <meta property="og:image:height" content="1257">
    <meta property="og:image:width" content="2400">
    <meta property="og:title" content="BitDust - decentralized on-line storage network">
    <meta property="og:description"
          content="BitDust is distributed secure anonymous on-line storage, where only the owner has access and absolute control over its data.">
    <meta property="og:url" content="https://bitdust.io">
    <meta property="og:image" content="/assets/img/og/og-image.jpg">

    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:600,700" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:600" rel="stylesheet">

    <link rel="stylesheet" href="/assets/css/applify.min.css" />
    <link rel="stylesheet" href="/css/automat.css" type="text/css">
</head>
<body data-fade_in="on-load">

<nav class="navbar navbar-fixed-top navbar-dark bg-indigo">
    <div class="container">

        <!-- Navbar Logo -->
        <a class="ui-variable-logo navbar-brand" href="https://bitdust.io/" title="BitDust">
            <!-- Default Logo -->
            <img class="logo-default" src="/assets/img/logo/bitdust-logo-white.svg"
                 alt="BitDust">
            <!-- Transparent Logo -->
            <img class="logo-transparent" src="/assets/img/logo/bitdust-logo-white.svg"
                 alt="BitDust">
        </a><!-- .navbar-brand -->

        <!-- Navbar Navigation -->
        <div class="ui-navigation navbar-center">
            <ul class="nav navbar-nav">
                <!-- Nav Item -->
                <li>
                    <a href="/index.html#product">Product</a>
                </li>
                <!-- Nav Item -->
                <li>
                    <a href="/index.html#problem">Problem</a>
                </li>
                <!-- Nav Item -->
                <li>
                    <a href="/index.html#solution">Solution</a>
                </li>
                <!-- Nav Item -->
                <li>
                    <a href="/index.html#ecosystem">Ecosystem</a>
                </li>
                <!-- Nav Item -->
                <li>
                    <a href="/index.html#roadmap">Roadmap</a>
                </li>
                <!-- Nav Item -->
                <li>
                    <a href="/index.html#team">Team</a>
                </li>
                <!-- Nav Item -->
                <li class="active">
                    <a href="/wiki/">Wiki</a>
                </li>

            </ul><!--.navbar-nav -->
        </div><!--.ui-navigation -->

        <!-- Navbar Button -->
        <a href="/index.html#product"
           class="btn btn-sm ui-gradient-peach pull-right">
            Get Started
        </a>


    </div><!-- .container -->
</nav> <!-- nav -->


<div class="main wiki" role="main">

    <!-- Api Docs -->
    <div id="ui-api-docs" class="section bg-light">
        <div class="container">

            <div class="ui-card">
                <div class="card-body">
                    <div class="row">

                        <!-- Docs Sidebar -->
                        <div class="docs-sidebar col-md-3">
                            <h6 class="heading">
                                Beginning
                            </h6>
                            <ul>
                                <li><a href="/wiki/intro.html">Introduction</a></li>
                                <li><a href="/wiki/concept.html">Concept</a></li>
                                <li><a href="/wiki/principle.html">How Does It Work?</a></li>
                                <li><a href="/wiki/install.html">Installation</a></li>
                                <li><a href="/wiki/commands.html">Commands</a></li>
                                <li><a href="/wiki/settings.html">Settings</a></li>
                                <li><a href="/wiki/glossary.html">Glossary</a></li>
                            </ul>
                            <h6 class="heading">
                                Principles
                            </h6>
                            <ul>
                                <li><a href="/wiki/identities.html">User Identification</a></li>
                                <li><a href="/wiki/storage.html">Distributed Storage</a></li>
                                <li><a href="/wiki/security.html">Data Security</a></li>
                                <li><a href="/wiki/sharing.html">File Sharing</a></li>
                                <li><a href="/wiki/rebuilding.html">Automatic Rebuilding</a></li>
                                <li><a href="/wiki/dht.html">Distributed Hash-Table</a></li>
                                <li><a href="/wiki/services.html">Network services</a></li>
                            </ul>
                            <h6 class="heading">Development</h6>
                            <ul>
                                <li><a href="/wiki/contribution.html">Contribution</a></li>
                                <li><a href="/wiki/roadmap.html">Roadmap</a></li>
                                <li><a href="/wiki/automats.html">Finite State Machines</a></li>
                                <li><a href="/wiki/technologies.html">Technologies</a></li>
                                <li><a href="/wiki/api.html">API Interface</a></li>
                                <li><a href="/wiki/software_releases.html">Software releases</a></li>
                                <li><a href="/wiki/seed_node.html">Seed node</a></li>
                                <li><a href="/wiki/respect.html">Contributors and Supporters</a></li>
                            </ul>
                            <h6 class="heading">Repositories</h6>
                            <ul>
                                <li>
                                    <a href="https://github.com/bitdust-io"
                                       target="blank">
                                        <i class="fa fa-github text-purple"></i>
                                        GitHub/bitdust-io
                                    </a>
                                </li>
                                <li>
                                    <a href="https://bitbucket.org/bitdust_io"
                                       target="blank">
                                        <i class="fa fa-github text-purple"></i>
                                        BitBucket/bitdust_io
                                    </a>
                                </li>
                                <li>
                                    <a href="https://gitlab.com/bitdust.io"
                                       target="blank">
                                        <i class="fa fa-github text-purple"></i>
                                        GitLab/bitdust.io
                                    </a>
                                </li>
                                <li>
                                    <a href="https://dev.bitdust.io/explore/projects"
                                       target="blank">
                                        <i class="fa fa-github text-purple"></i>
                                        dev.bitdust.io
                                    </a>
                                </li>
                            </ul>
                        </div>

                        <div class="docs-content col-md-9">


                            <div class="docs-section doc-action-cards">
                                <h1 id="bitdust-merchants">BitDust Merchants</h1>

<p>(draft proposal)</p>

<h2 id="who-?">Who ?</h2>

<ul>
<li>customer</li>
<li>supplier</li>
<li>merchant</li>
</ul>

<h2 id="how-?">How ?</h2>

<h3 id="merchant">Merchant</h3>

<ul>
<li>customer finds random merchant via DHT</li>
<li>merchant will receive BTC from customer via BTCPayServer integrated with BitDust software</li>
<li>merchant will pay to supplier from his BTC wallet integrated with BitDust software</li>
<li>customer's balance is "accounted" by merchant - he must select one single merchant</li>
<li>suppliers of that customer can "claim" money from that "merchant" after contract completed</li>
</ul>

<h3 id="contract">Contract</h3>

<ul>
<li>customer and supplier first agree on "contract conditions" before start "the deal" with each other</li>
<li>contract must define duration and amount of storage</li>
<li>contract can be only started when customer have enough balance on account (by particular merchant)</li>
<li>contract can only be started or completed when both customer and supplier are online at the moment and able to communicate p2p</li>
</ul>

<h3 id="secret-code-a">Secret code A</h3>

<ul>
<li>process is initiated by the supplier</li>
<li>supplier prepare contract details about the deal with customer</li>
<li>first secret code A is generated by the supplier and he record it locally</li>
<li>then supplier encrypt code A with own public key</li>
<li>contract details are merged together with encrypted copy of A and signed with private key of supplier</li>
<li>signed contract info (with encrypted code A) is sent to the customer</li>
<li>customer records code A locally, he does not know A, only encrypted copy of A</li>
</ul>

<h3 id="secret-code-b">Secret code B</h3>

<ul>
<li>now customer generate second secret code B and record it locally</li>
<li>then customer encrypt code B with own public key</li>
<li>customer attach the encrypted codes A and B to the contract description he receved from supplier</li>
<li>customer signs that merged info with own private key and send to the supplier</li>
<li>supplier verify the signature with customer's public key and records the second code B locally</li>
<li>supplier does not know the original code B, only encrypted copy of B</li>
</ul>

<h3 id="proof-of-beginning">Proof of beginning</h3>

<ul>
<li>now both sides have a proof that "contract was started" - but only if they show decrypted (original) codes</li>
<li>supplier sends that info to the merchant and merchant records it locally and also remember the time moment</li>
<li>merchant will store contract description with encrypted codes A and B signed by both parties</li>
</ul>

<h3 id="contract-confirmation">Contract confirmation</h3>

<ul>
<li>merchant verifies both signatures of the customer and supplier and contract conditions (current world time)</li>
<li>merchant requests original code A from the supplier</li>
<li>merchant requests original code B from the customer</li>
<li>once both codes are provided to the merchant he can verify them against encrypted codes received from supplier earlier</li>
<li>merchant uses customer's public key to encrypt original code B and compare with info received from supplier</li>
<li>merchant uses supplier's public key to encrypt original code A and compare with info received from supplier</li>
<li>now the contract is confirmed by the merchant and begins - he got "the proof" from both sides that contract is started</li>
</ul>

<h3 id="contract-fulfillment">Contract fulfillment</h3>

<ul>
<li>supplier must follow the contract and provide resources and services to the customer</li>
<li>both sides are couting time from the beginning of the contract</li>
<li>after the time elapsed since the end of the contract, the supplier will again begin the process to complete the contract</li>
<li>simmilar process for codes A and B triggers again between customer and supplier</li>
<li>it is initiated again by the supplier - he expects customer to be online at that moment</li>
</ul>

<h3 id="secret-code-c">Secret code C</h3>

<ul>
<li>third secret code C is generated by the supplier and he record it locally</li>
<li>supplier encrypt code C with own public key and send it to the customer</li>
<li>customer records the code C locally, he does not know C, only encrypted copy of C</li>
</ul>

<h3 id="secret-code-d">Secret code D</h3>

<ul>
<li>fourth secret code D is generated by the customer and he record it locally</li>
<li>then customer encrypt code D with own public key</li>
<li>customer attach the encrypted codes C and D to the contract description</li>
<li>customer signs that merged info with own private key and send to the supplier</li>
<li>supplier verify the signature with customer's public key and records the second code D locally</li>
<li>supplier does not know the original code D, only encrypted copy of D</li>
</ul>

<h3 id="proof-of-completeness">Proof of completeness</h3>

<ul>
<li>now supplier and customer both posses true and equal, signed and verified contract info with encrypted codes A, B, C and D</li>
<li>effectively both sides have a proof that "contract was started and completed" - but only if they provide original codes</li>
<li>supplier send contract description with encrypted codes A, B, C and D to the merchant</li>
<li>merchant will store contract description with encrypted codes C and D signed by both parties</li>
</ul>

<h3 id="contract-completion">Contract completion</h3>

<ul>
<li>merchant verifies both signatures of the customer and supplier and contract conditions (elapsed time)</li>
<li>merchant requests original code C from the supplier</li>
<li>merchant requests original code D from the customer</li>
<li>once both codes are provided to the merchant he can verify them against encrypted codes received from supplier earlier</li>
<li>merchant uses customer's public key to encrypt original code D and compare with info received from supplier</li>
<li>merchant uses supplier's public key to encrypt original code C and compare with info received from supplier</li>
<li>now the contract is completed by the merchant - he received "the proof" from both parties about the completeness of the contract</li>
</ul>

<h3 id="contract-claim">Contract claim</h3>

<ul>
<li>"claim" must contain contract description and 4 "secret" codes: A, B, C, D </li>
<li>at some point supplier would like to "claim" his money from the merchants</li>
<li>he must contact each merchant individually</li>
<li>in the "claim" request supplier include his BTC address to receive funds</li>
<li>supplier provide a list of contracts to the merchant for which he would like to receive money</li>
<li>every single merchant verifies corresponding contracts - they must not be "claimed" yet</li>
<li>merchant must send BTC to supplier now</li>
<li>merchant marks those contracts as "claimed and paid" (potentially as a transaction on a blockchain)</li>
</ul>

<h3 id="customer-complain">Customer complain</h3>

<ul>
<li>customer can contact the merchant and "complain" about the supplier after contract begins</li>
<li>in that case he can switch contract to another supplier with no lose</li>
<li>customer still must pay for the contract, but it can be another supplier - they both must finish STEP 6 again</li>
<li>when customer is "bitching" for nothing but current supplier is doing well - it is accepted risk for supplier</li>
<li>when switching contract to a new supplier, the old supplier receives nothing and new supplier receives the whole amount</li>
</ul>

<h3 id="chain-of-contracts">Chain of contracts</h3>

<ul>
<li>each customer and supplier can run many contracts with each other sequentially</li>
<li>this way customers can stay with same suppliers and does not have to reconnect all the time to new supplier</li>
<li>to make it happen customer and supplier must periodically "renew" the current contract - just sign a new one to the future</li>
<li>every time contract duration must at least double or longer</li>
<li>longer contracts are more risky for supplier - because customer can "complain" just before the end of the contract and money will go to another supplier</li>
<li>shorter contracts are less effective for customer - the data must be reconstructed on the new supplier and that "costs" money as well</li>
<li>"contract chain" between supplier and customer at every moment in time is balanced : "risk" equals to "effectiveness"</li>
<li>every next contract in the "chain" is a new "deal" between customer and supplier and each can "decline" it with no loose</li>
</ul>

<h3 id="communication-flows">Communication flows</h3>

<h4 id="contract-begin">Contract begin</h4>

<pre><code>        STEP 1            STEP 2                STEP 3                STEP 4           STEP 5           STEP 6

Supplier -[A]-&gt; Customer -[A+B]-&gt; Supplier -[A+B+Contract]-&gt; Merchant -[B?]-&gt; Customer -{B}-&gt; Merchant -[OK!]-&gt; Customer 
                                                             Merchant -[A?]-&gt; Supplier -{A}-&gt; Merchant -[OK!]-&gt; Supplier
</code></pre>

<h4 id="contract-complete">Contract complete</h4>

<pre><code>         STEP 7           STEP 8                 STEP 9                   STEP 10         STEP 11          STEP 12

Supplier -[C]-&gt; Customer -[C+D]-&gt; Supplier -[A+B+C+D+Contract]-&gt; Merchant -[D?]-&gt; Customer -{D}-&gt; Merchant -[OK!]-&gt; Customer 
                                                                 Merchant -[C?]-&gt; Supplier -{C}-&gt; Merchant -[OK!]-&gt; Supplier
</code></pre>

<h4 id="customer-balance">Customer balance</h4>

<pre><code>         STEP 13            STEP 14
Customer -[BTC]-&gt; Merchant -[OK!]-&gt; Customer
                  Merchant -[transaction]-&gt; blockchain
</code></pre>

<h4 id="supplier-claim">Supplier claim</h4>

<pre><code>          STEP 15             STEP 16
Supplier -[Claim]-&gt; Merchant -[BTC]-&gt; Supplier
                    Merchant -[transaction]-&gt; blockchain
</code></pre>

<h2 id="why-?">Why ?</h2>

<h4 id="if-supplier-is-offline-after-contract-begins-?">if supplier is offline after contract begins ?</h4>

<p>customer can "complain" to the merchant and re-sign contract with another supplier. current supplier can not "claim" anything.</p>

<h4 id="if-customer-is-offline-after-contract-begins-?">if customer is offline after contract begins ?</h4>

<p>supplier suppose to fullfill the contract till the end and then stop the service
if customer never comes back and complete the contract - it is accepted risk for supplier</p>

<h4 id="if-supplier-do-not-provide-original-code-a-to-the-merchant-(-step-5-)-?">if supplier do not provide original code A to the merchant ( STEP 5 ) ?</h4>

<p>customer stop relattion with that supplier with no loose</p>

<h4 id="if-supplier-do-not-provide-original-code-c-to-the-merchant-(-step-11-)-?">if supplier do not provide original code C to the merchant ( STEP 11 ) ?</h4>

<p>no problem for customer because supplier already fullfilled the contract
but supplier will fail his "claim" for that contract</p>

<h4 id="if-customer-do-not-provide-original-code-b-to-the-merchant-(-step-5-)-?">if customer do not provide original code B to the merchant ( STEP 5 ) ?</h4>

<p>supplier stop relations with that customer with no loose</p>

<h4 id="if-customer-do-not-provide-original-code-d-to-the-merchant-(-step-11-)-?">if customer do not provide original code D to the merchant ( STEP 11 ) ?</h4>

<p>merchant will pay BTC to supplier but will stop relation with that customer and put it in the black list.
merchant already received BTC from that customer actually, so not much loose for merchant.</p>

<h4 id="how-the-contract-is-stored-?">how the contract is stored ?</h4>

<p>contract is a small json file that describes the details of the deal between customer and supplier.
at first it is generated on supplier side, then customer receives it and finally the merchant.
after contract completed and paid it can be erased.
thought merchants potentially can utilize another storage all together to remember the history of all contracts in the network.</p>

<h4 id="...">...</h4>

                            </div>


                        </div><!-- .docs-content -->
                    </div><!-- .row -->
                </div><!-- .card-body -->
            </div><!-- .ui-card -->

        </div><!-- .container -->
    </div><!-- #ui-api-docs -->

    <!-- Footer -->
    <footer class="ui-footer bg-gray">
        <div class="container pt-6 pb-6">
            <div class="row">
                <div class="col-sm-8 footer-about footer-col center-on-sm">
                    <img src="/assets/img/logo/bitdust-logo-white.svg"
                         alt="BitDust" />
                    <p class="mt-1">
                        We are currently with a small team primarily focusing on developing our product and
                        unfortunately donâ€™t have the resources to support a community on different channels. For now you
                        can join the discussion on Telegram or if you have a business related question you can email us.
                    </p>
                </div>

                <div class="col-md-4 col-sm-6 footer-col center-on-sm">
                    <div>
                        <a class="btn ui-gradient-purple btn-circle shadow-md"
                           href="https://t.me/bitdust" target="_blank">
                            <span class="fa fa-telegram"></span>
                        </a>
                        <a class="btn ui-gradient-blue btn-circle shadow-md"
                           href="https://github.com/bitdust-io/" target="_blank">
                            <span class="fa fa-github"></span>
                        </a>
                        <a class="btn ui-gradient-green btn-circle shadow-md"
                           href="https://twitter.com/bitdust_io" target="_blank">
                            <span class="fa fa-twitter"></span>
                        </a>
                    </div>
                </div>
            </div><!-- .row -->
        </div><!-- .container -->

        <!-- Footer Copyright -->
        <div class="footer-copyright bg-dark-gray">
            <div class="container">
                <div class="row">
                    <!-- Copyright -->
                    <div class="col-sm-6 center-on-sm">
                        <p>
                            &copy; 2019 <a href="https://bitdust.io" target="_blank" title="BitDust">BitDust</a>
                        </p>
                    </div>
                    <!-- Social Icons -->
                    <div class="col-sm-6 text-right">
                        <ul class="footer-nav">
                            <li>
                                <a href="https://bitdust.io/wiki/">
                                    Wiki
                                </a>
                            </li>
                            <li>
                                <a href="https://github.com/bitdust-io/">
                                    Github
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div><!-- .container -->
        </div><!-- .footer-copyright -->

    </footer><!-- .ui-footer -->

</div><!-- .main -->


<!-- Scripts -->
<script src="/assets/js/libs/jquery/jquery-3.2.1.min.js"></script>
<script src="/assets/js/libs/slider-pro/jquery.sliderPro.min.js"></script>
<script src="/assets/js/libs/owl.carousel/owl.carousel.min.js"></script>

<script src="/assets/js/applify/ui-map.js"></script>
<script src="/assets/js/libs/form-validator/form-validator.min.js"></script>
<script src="/assets/js/libs/bootstrap.js"></script>
<script src="/assets/js/applify/build/applify.js"></script>

<script>
    $('a[href*=\\#]').on('click', function (event) {
        if ($(this.hash).offset() && $(this.hash).offset().top) {
            event.preventDefault();
            $('html,body').animate({scrollTop: $(this.hash).offset().top - 100}, 500);
            window.location.hash = this.hash;
        }
    });
</script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-25753370-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
        dataLayer.push(arguments);
    }

    gtag('js', new Date());

    gtag('config', 'UA-109832032-1');
</script>

</body>
</html>
